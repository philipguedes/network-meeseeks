<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<!-- <link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html"> -->
<link rel="import" href="components/status-card.html">
<!-- <link rel="import" href="my-new-view.html">  -->


<dom-module id="main-view">
  <template>
    <style>
      :host {
        font-family: sans-serif;
      }
      .flex-horizontal {
        @apply --layout-horizontal;
      }
    </style>
    <h1>Monitor Dashboard</h1>

    <div class="flex-horizontal">
      <status-card element-name="gaming" status=[[gaming]]></status-card>
      <status-card element-name="lstreaming" status=[[lstreaming]]></status-card>
    </div>
    <div class="flex-horizontal">
      <status-card element-name="dash" status=[[dash]]></status-card>
      <status-card element-name="voip" status=[[voip]]></status-card>
    </div> 

  </template>

  <script>
    class ViewApp extends Polymer.Element {

      static get is() { return 'main-view' }
      
      static get properties() {
        return {
          voip: {
            type: String,
            notify: true
          },
          dash: {
            type: String,
            notify: true
          },
          gaming: {
            type: String,
            notify: true
          },
          lstreaming: {
            type: String,
            notify: true
          }
        }
      }

      ready() {
        super.ready();
        this._loadStatistics();
        console.log('main app ready')

        console.log(api);
      }
      
      _loadStatistics() {
        api.loadStatistics().then((res) => {
          this.set('last_update', res['last_update']);
          this.set('voip', res['voip']);
          this.set('gaming', res['gaming']);
          this.set('dash', res['dash']);
          this.set('lstreaming', res['lstreaming']);
        });
      }
    }
    customElements.define(ViewApp.is, ViewApp);
    </script>
</dom-module>